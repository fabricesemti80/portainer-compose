fs-tech.uk {
    # Root domain - redirect to minio
    redir https://minio.fs-tech.uk{uri} permanent
}

minio.fs-tech.uk {
    # Reverse proxy to MinIO console
    reverse_proxy minio:9001 {
        # Handle WebSocket connections for MinIO console
        header_up Host {host}
        header_up X-Real-IP {remote}
        header_up X-Forwarded-For {remote}
        header_up X-Forwarded-Proto {scheme}
    }

    # Enable automatic HTTPS with self-signed certificates
    tls internal
}

tools.fs-tech.uk {
    # Reverse proxy to it-tools
    reverse_proxy it-tools:80 {
        header_up Host {host}
        header_up X-Real-IP {remote}
        header_up X-Forwarded-For {remote}
        header_up X-Forwarded-Proto {scheme}
    }

    # Enable automatic HTTPS with self-signed certificates
    tls internal
}
